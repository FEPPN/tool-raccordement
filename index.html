<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Calculateur de co√ªt de raccordement Enedis ‚Äî papernest</title>
<style>
@font-face{font-family:AvenirPapernest;src:local('Avenir'), local('Avenir Next'), local('Helvetica Neue');}
:root{
--purple:#5A52FF;--purple-2:#ACA8FF;--teal:#02C5AE;--teal-dark:#009b8b;--bg:#F1F0FF;--mint:#E6F9F7;--softgreen:#ECFDF5;--white:#fff;--black:#000;
}
*{box-sizing:border-box;font-family:AvenirPapernest,"Avenir","Helvetica Neue",Arial,sans-serif}
body{background:#F8F8FF;margin:0;display:flex;justify-content:center;align-items:center;min-height:100vh;padding:20px}
.container{display:grid;grid-template-columns:1fr 1fr;gap:20px;width:100%;max-width:950px}
.card{background:white;border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,0.05);overflow:hidden}
.card-header{padding:18px 24px;color:white;font-weight:700}
.card-body{padding:24px}
.header-left{background:linear-gradient(90deg,var(--purple),var(--purple-2))}
.header-right{background:linear-gradient(90deg,var(--teal),var(--teal-dark))}
.card-body h3{font-size:15px;margin-top:0;display:flex;align-items:center;gap:6px}
.info-icon{background:#E6F9F7;color:#02C5AE;border-radius:50%;width:18px;height:18px;display:flex;align-items:center;justify-content:center;font-weight:700;cursor:pointer;position:relative;font-size:13px;}
.tooltip{display:none;position:absolute;top:24px;left:0;background:#E6F9F7;color:#333;padding:8px 10px;border-radius:8px;max-width:260px;font-size:12px;z-index:10;box-shadow:0 2px 6px rgba(0,0,0,0.1)}
.info-icon.active .tooltip{display:block}
select,input[type=number]{width:100%;padding:10px;border-radius:8px;border:1px solid #ddd;margin-bottom:8px}
.result-box{background:#E6F9F7;border-radius:12px;padding:20px;text-align:center;margin-bottom:16px}
.result-box span{display:block;font-size:32px;font-weight:700;color:#02C5AE;margin-bottom:8px}
.refaction-box{background:var(--softgreen);border-radius:12px;padding:16px;text-align:center;margin-bottom:16px}
.refaction-box span{display:block;font-size:16px;font-weight:600;color:#009b8b;margin-bottom:4px}
.btn-primary{background:#02C5AE;color:white;border:none;padding:12px 20px;border-radius:10px;cursor:pointer;font-weight:600;width:100%;margin-top:8px}
.btn-secondary{background:white;border:1px solid #02C5AE;color:#02C5AE;padding:10px 20px;border-radius:10px;cursor:pointer;width:100%;margin-top:8px}
.small{font-size:13px;color:#666}
.hint{font-size:12px;color:#444;background:#F1F0FF;padding:10px;border-radius:8px;margin-top:10px;text-align:left}
@media(max-width:700px){.container{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="container">
  <div class="card">
    <div class="card-header header-left">‚öôÔ∏è Vos informations</div>
    <div class="card-body">
      <p>Renseignez vos informations pour calculer le co√ªt de votre raccordement.</p>
      <form id="calc">

        <h3>Puissance n√©cessaire <div class="info-icon">?<div class="tooltip">Choisissez la puissance de raccordement correspondant √† votre installation. ‚â§36 kVA = r√©sidentiel, 36‚Äì250 kVA = professionnel, >250 kVA = HTA (devis).</div></div></h3>
        <select id="power">
          <option value="le36">‚â§ 36 kVA</option>
          <option value="36_250">> 36 kVA et ‚â§ 250 kVA</option>
          <option value="gt250">> 250 kVA</option>
        </select>

        <h3>Zone de facturation <div class="info-icon">?<div class="tooltip">ZFA : zones urbaines, co√ªts d‚Äôextension moindres. ZFB : zones rurales/√©loign√©es, co√ªts plus √©lev√©s.</div></div></h3>
        <select id="zone">
          <option value="ZFA">ZFA (zone urbaine)</option>
          <option value="ZFB">ZFB (zone rurale)</option>
        </select>

        <h3>Longueur de l‚Äôextension (LE) <div class="info-icon">?<div class="tooltip">Longueur de la canalisation √† cr√©er entre le r√©seau public et votre b√¢timent.</div></div></h3>
        <input id="length" type="number" min="0" value="0">

        <h3>Longueur du branchement (LB) <div class="info-icon">?<div class="tooltip">Distance entre le r√©seau public et le compteur. Plus cette distance est grande, plus le co√ªt augmente.</div></div></h3>
        <input id="lb" type="number" min="0" value="0">

        <h3>Mise en service initiale <div class="info-icon">?<div class="tooltip">Standard (10 jours ‚Äì 28,84 ‚Ç¨) ou Express (5 jours ‚Äì 76,16 ‚Ç¨). Frais ajout√©s au total TTC.</div></div></h3>
        <select id="ms">
          <option value="standard">Standard ‚Äì 28,84 ‚Ç¨ TTC</option>
          <option value="express">Express ‚Äì 76,16 ‚Ç¨ TTC</option>
        </select>

        <button type="button" id="compute" class="btn-primary">Calculer mon raccordement</button>
        <button type="button" id="reset" class="btn-secondary">R√©initialiser</button>
      </form>
    </div>
  </div>

  <div class="card">
    <div class="card-header header-right">üí∞ R√©sultat</div>
    <div class="card-body">
      <p id="msg">Remplissez vos informations pour voir le r√©sultat.</p>
      <div id="out" hidden>
        <div class="result-box">
          <span id="summary"></span>
          <div id="breakdown" class="small"></div>
        </div>
        <div class="refaction-box" id="refaction"></div>
        <div class="hint">
          <b>Remarques :</b>
          <ul>
            <li>Les prix proviennent du bar√®me public Enedis (version 2025). Pour certains cas complexes (HTA, lotissements, producteurs), le montant est chiffr√© sur devis Enedis.</li>
            <li>Toutes les valeurs affich√©es sont TTC. Les estimations incluent la mise en service.</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
const data={
 le36:{branchement_complete:2808.00,extensions:{ZFA:{cfe:3058.80,cve:126.00},ZFB:{cfe:3955.20,cve:165.60}}},
 gt36:{cfB:5106.00,cvB_per_m:181.20,extensions:{ZFA:{cfe:3104.40,cve:154.80},ZFB:{cfe:4039.20,cve:198.00}}},
 miseEnService:{standard:28.84,express:76.16},refaction_rate:0.4};
const $=id=>document.getElementById(id);
const fmt=x=>Number(x).toLocaleString('fr-FR',{minimumFractionDigits:2,maximumFractionDigits:2})+' ‚Ç¨ TTC';

document.querySelectorAll('.info-icon').forEach(icon=>{
 icon.addEventListener('click',e=>{
   e.stopPropagation();
   icon.classList.toggle('active');
 });
});
window.addEventListener('click',()=>{
 document.querySelectorAll('.info-icon').forEach(i=>i.classList.remove('active'));
});

$('compute').addEventListener('click',()=>{
 const power=$('power').value,zone=$('zone').value,length=Number($('length').value||0),lb=Number($('lb').value||0),ms=$('ms').value;
 let total=0,breakdown=[];
 if(power==='le36'){
  const branch=data.le36.branchement_complete;const ext=data.le36.extensions[zone];const ext_cost=ext.cfe+length*ext.cve;total=branch+ext_cost+data.miseEnService[ms];
  breakdown.push(`Branchement complet : ${fmt(branch)}`);
  breakdown.push(`Extension (${length} m) ${zone} : ${fmt(ext_cost)}`);
 } else if(power==='36_250'){
  const branch_fixed=data.gt36.cfB;const branch_var=data.gt36.cvB_per_m*lb;const ext=data.gt36.extensions[zone];const ext_cost=ext.cfe+length*ext.cve;total=branch_fixed+branch_var+ext_cost+data.miseEnService[ms];
  breakdown.push(`Part fixe branchement : ${fmt(branch_fixed)}`);
  breakdown.push(`Part variable (${lb} m) : ${fmt(branch_var)}`);
  breakdown.push(`Extension (${length} m) ${zone} : ${fmt(ext_cost)}`);
 } else {
  $('out').hidden=false;$('summary').textContent='Devis Enedis n√©cessaire (>250 kVA)';$('breakdown').textContent='Cas HTA √† chiffrer sur devis.';$('refaction').textContent='';return;
 }
 const refact=total*(1-data.refaction_rate);
 $('out').hidden=false;
 $('msg').textContent='';
 $('summary').textContent='Estimation : '+fmt(total);
 $('breakdown').innerHTML=breakdown.join('<br>');
 $('refaction').innerHTML=`<span>Apr√®s r√©faction tarifaire (~40%) : ${fmt(refact)}</span><div class='small'><i>La r√©faction tarifaire est une r√©duction appliqu√©e par Enedis sur une partie des travaux, pouvant atteindre 40% selon les cas.</i></div>`;
});
$('reset').addEventListener('click',()=>{$('calc').reset();$('out').hidden=true;$('msg').textContent='Remplissez vos informations pour voir le r√©sultat.'});
})();
</script>
</body>
</html>
